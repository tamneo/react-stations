// @bun
class z{_listeners=new Map;_eventListeners=Object();state=Object();subscribe(q){let{listeners:f}=q,h=!Array.isArray(f)?[f]:f;try{for(let b=0;b<h.length;b++){if(this._listeners.has(h[b]))continue;this._listeners.set(h[b],h[b])}}catch(b){console.error(b)}}unsubscribe(q){let{listeners:f}=q,h=!Array.isArray(f)?[f]:f;try{for(let b=0;b<h.length;b++){if(!this._listeners.has(h[b]))continue;this._listeners.delete(h[b])}}catch(b){console.error(b)}}subscribeOnEvent(q){let{eventName:f,listeners:h}=q,b=!Array.isArray(h)?[h]:h;try{if(!this._eventListeners[f]){this._eventListeners[f]=new Map;for(let j=0;j<b.length;j++)this._eventListeners[f]?.set(b[j],void 0)}else for(let j=0;j<b.length;j++)if(!this._eventListeners[f]?.has(b[j]))this._eventListeners[f]?.set(b[j],void 0)}catch(j){console.error(j)}}unsubscribeOnEvent(q){let{eventName:f,listeners:h}=q,b=!Array.isArray(h)?[h]:h;try{if(!this._eventListeners[f])return;for(let j=0;j<b.length;j++){if(!this._eventListeners[f]?.has(b[j]))continue;this._eventListeners[f]?.delete(b[j])}}catch(j){console.error(j)}}setState(q){this.state={...q};try{if(this._listeners.size<1)return;let f=this._listeners.entries(),h=[];for(let[b]of f)h.push(b);Promise.allSettled(h.map((b)=>b(this.state)))}catch(f){console.error(f)}}dispatch(q){try{let{eventName:f,data:h}=q,b=this._eventListeners[f];if(!b)return;let j=b.entries(),x=[];for(let[w]of j)x.push(w);Promise.allSettled(x.map((w)=>w(h)))}catch(f){console.error(f)}}get $state(){return{...this.state}}}export{z as Station};

//# debugId=D7D67ED621C31B6364756E2164756E21
