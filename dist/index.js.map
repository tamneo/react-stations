{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": [
    "export type TListener<T extends object> = (arsg: T) => any;\nexport type TEventReturn<T = any> = T;\n\n/**\n * Parent station\n */\nexport class Station<\n    TState extends {},\n    TEvents extends { [key: string]: TEventReturn } = {}\n> {\n    private readonly _listeners = new Map<\n        TListener<TState>,\n        TListener<TState>\n    >();\n\n    private readonly _eventListeners: Partial<{\n        [key in keyof TEvents]: Map<(args: TEvents[key]) => any, undefined>;\n    }> = Object();\n\n    protected state: TState = Object();\n\n    /**\n     * Subcribe station by listener(s)\n     * @param args\n     */\n    public subscribe(\n        args: Required<{\n            listeners: TListener<TState> | Array<TListener<TState>>;\n        }>\n    ) {\n        const { listeners } = args;\n        const convertedListeners = !Array.isArray(listeners)\n            ? [listeners]\n            : listeners;\n\n        try {\n            for (let i = 0; i < convertedListeners.length; i++) {\n                if (this._listeners.has(convertedListeners[i])) {\n                    continue;\n                }\n\n                this._listeners.set(\n                    convertedListeners[i],\n                    convertedListeners[i]\n                );\n            }\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * Unsubcribe station on specific listenter(s)\n     * @param args\n     */\n    public unsubscribe(\n        args: Required<{\n            listeners: TListener<TState> | Array<TListener<TState>>;\n        }>\n    ) {\n        const { listeners } = args;\n        const convertedListeners = !Array.isArray(listeners)\n            ? [listeners]\n            : listeners;\n\n        try {\n            for (let i = 0; i < convertedListeners.length; i++) {\n                if (!this._listeners.has(convertedListeners[i])) {\n                    continue;\n                }\n\n                this._listeners.delete(convertedListeners[i]);\n            }\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     *\n     * @param args\n     */\n    public subscribeOnEvent<TEventName extends keyof TEvents>(\n        args: Required<{\n            eventName: TEventName;\n            listeners: (\n                args: TEvents[TEventName]\n            ) =>\n                | any\n                | Promise<any>\n                | Array<(args: TEvents[TEventName]) => any | Promise<any>>;\n        }>\n    ) {\n        const { eventName, listeners } = args;\n        const convertedListeners = !Array.isArray(listeners)\n            ? [listeners]\n            : listeners;\n\n        try {\n            if (!this._eventListeners[eventName]) {\n                this._eventListeners[eventName] = new Map();\n\n                for (let i = 0; i < convertedListeners.length; i++) {\n                    this._eventListeners[eventName]?.set(\n                        convertedListeners[i],\n                        undefined\n                    );\n                }\n            } else {\n                for (let i = 0; i < convertedListeners.length; i++) {\n                    if (\n                        !this._eventListeners[eventName]?.has(\n                            convertedListeners[i]\n                        )\n                    ) {\n                        this._eventListeners[eventName]?.set(\n                            convertedListeners[i],\n                            undefined\n                        );\n                    }\n                }\n            }\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * Subcribe on customize event\n     * @param args\n     */\n    public unsubscribeOnEvent<TEventName extends keyof TEvents>(\n        args: Required<{\n            eventName: TEventName;\n            listeners: (\n                args: TEvents[TEventName]\n            ) =>\n                | any\n                | Promise<any>\n                | Array<(args: TEvents[TEventName]) => any | Promise<any>>;\n        }>\n    ) {\n        const { eventName, listeners } = args;\n        const convertedListeners = !Array.isArray(listeners)\n            ? [listeners]\n            : listeners;\n\n        try {\n            if (!this._eventListeners[eventName]) {\n                return;\n            }\n\n            for (let i = 0; i < convertedListeners.length; i++) {\n                if (\n                    !this._eventListeners[eventName]?.has(convertedListeners[i])\n                ) {\n                    continue;\n                }\n\n                this._eventListeners[eventName]?.delete(convertedListeners[i]);\n            }\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * Update state and emit new state changes to listening React component(s)\n     * @param args\n     */\n    protected setState(args: TState) {\n        this.state = { ...args };\n\n        try {\n            if (this._listeners.size < 1) {\n                return;\n            }\n\n            const entries = this._listeners.entries();\n            const keys: TListener<TState>[] = [];\n\n            for (const [key] of entries) {\n                keys.push(key);\n            }\n\n            Promise.allSettled(keys.map((key) => key(this.state)));\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     *\n     * @param args\n     * @returns\n     */\n    protected dispatch<TEventName extends keyof TEvents>(\n        args: Required<{\n            eventName: TEventName;\n            data: TEvents[TEventName];\n        }>\n    ) {\n        try {\n            const { eventName, data } = args;\n\n            const listeners = this._eventListeners[eventName];\n\n            if (!listeners) {\n                return;\n            }\n\n            const entries = listeners.entries();\n            const keys: Array<(args: TEvents[TEventName]) => any> = [];\n\n            for (const [key] of entries) {\n                keys.push(key);\n            }\n\n            Promise.allSettled(keys.map((key) => key(data)));\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * @deprecated\n     */\n    get $state() {\n        return { ...this.state };\n    }\n}\n"
  ],
  "mappings": ";AAMO,MAAM,CAGX,CACmB,WAAa,IAAI,IAKjB,gBAEZ,OAAO,EAEF,MAAgB,OAAO,EAM1B,SAAS,CACZ,EAGF,CACE,IAAQ,aAAc,EAChB,EAAqB,CAAC,MAAM,QAAQ,CAAS,EAC7C,CAAC,CAAS,EACV,EAEN,GAAI,CACA,QAAS,EAAI,EAAG,EAAI,EAAmB,OAAQ,IAAK,CAChD,GAAI,KAAK,WAAW,IAAI,EAAmB,EAAE,EACzC,SAGJ,KAAK,WAAW,IACZ,EAAmB,GACnB,EAAmB,EACvB,GAEN,MAAO,EAAO,CACZ,QAAQ,MAAM,CAAK,GAQpB,WAAW,CACd,EAGF,CACE,IAAQ,aAAc,EAChB,EAAqB,CAAC,MAAM,QAAQ,CAAS,EAC7C,CAAC,CAAS,EACV,EAEN,GAAI,CACA,QAAS,EAAI,EAAG,EAAI,EAAmB,OAAQ,IAAK,CAChD,GAAI,CAAC,KAAK,WAAW,IAAI,EAAmB,EAAE,EAC1C,SAGJ,KAAK,WAAW,OAAO,EAAmB,EAAE,GAElD,MAAO,EAAO,CACZ,QAAQ,MAAM,CAAK,GAQpB,gBAAkD,CACrD,EASF,CACE,IAAQ,YAAW,aAAc,EAC3B,EAAqB,CAAC,MAAM,QAAQ,CAAS,EAC7C,CAAC,CAAS,EACV,EAEN,GAAI,CACA,GAAI,CAAC,KAAK,gBAAgB,GAAY,CAClC,KAAK,gBAAgB,GAAa,IAAI,IAEtC,QAAS,EAAI,EAAG,EAAI,EAAmB,OAAQ,IAC3C,KAAK,gBAAgB,IAAY,IAC7B,EAAmB,GACnB,MACJ,EAGJ,aAAS,EAAI,EAAG,EAAI,EAAmB,OAAQ,IAC3C,GACI,CAAC,KAAK,gBAAgB,IAAY,IAC9B,EAAmB,EACvB,EAEA,KAAK,gBAAgB,IAAY,IAC7B,EAAmB,GACnB,MACJ,EAId,MAAO,EAAO,CACZ,QAAQ,MAAM,CAAK,GAQpB,kBAAoD,CACvD,EASF,CACE,IAAQ,YAAW,aAAc,EAC3B,EAAqB,CAAC,MAAM,QAAQ,CAAS,EAC7C,CAAC,CAAS,EACV,EAEN,GAAI,CACA,GAAI,CAAC,KAAK,gBAAgB,GACtB,OAGJ,QAAS,EAAI,EAAG,EAAI,EAAmB,OAAQ,IAAK,CAChD,GACI,CAAC,KAAK,gBAAgB,IAAY,IAAI,EAAmB,EAAE,EAE3D,SAGJ,KAAK,gBAAgB,IAAY,OAAO,EAAmB,EAAE,GAEnE,MAAO,EAAO,CACZ,QAAQ,MAAM,CAAK,GAQjB,QAAQ,CAAC,EAAc,CAC7B,KAAK,MAAQ,IAAK,CAAK,EAEvB,GAAI,CACA,GAAI,KAAK,WAAW,KAAO,EACvB,OAGJ,IAAM,EAAU,KAAK,WAAW,QAAQ,EAClC,EAA4B,CAAC,EAEnC,QAAY,KAAQ,EAChB,EAAK,KAAK,CAAG,EAGjB,QAAQ,WAAW,EAAK,IAAI,CAAC,IAAQ,EAAI,KAAK,KAAK,CAAC,CAAC,EACvD,MAAO,EAAO,CACZ,QAAQ,MAAM,CAAK,GASjB,QAA0C,CAChD,EAIF,CACE,GAAI,CACA,IAAQ,YAAW,QAAS,EAEtB,EAAY,KAAK,gBAAgB,GAEvC,GAAI,CAAC,EACD,OAGJ,IAAM,EAAU,EAAU,QAAQ,EAC5B,EAAkD,CAAC,EAEzD,QAAY,KAAQ,EAChB,EAAK,KAAK,CAAG,EAGjB,QAAQ,WAAW,EAAK,IAAI,CAAC,IAAQ,EAAI,CAAI,CAAC,CAAC,EACjD,MAAO,EAAO,CACZ,QAAQ,MAAM,CAAK,MAOvB,OAAM,EAAG,CACT,MAAO,IAAK,KAAK,KAAM,EAE/B",
  "debugId": "D7D67ED621C31B6364756E2164756E21",
  "names": []
}